# USEPDFLATEX = true
PDFLATEX = latexmk
PDFLATEXFLAGS = -lualatex
# TEXINPUTS += . .. ../classes

INCLUDETEXS = $(addsuffix .tex, $(INCLUDES))

PANDOCARGS = -f markdown+ignore_line_breaks -t latex -N --top-level-division=chapter --pdf-engine=lualatex

.PHONY: clean

$(TARGET).pdf: $(addprefix ../classes/, $(YAYACLASSES)) $(TARGET).tex $(INCLUDETEXS)
	$(PDFLATEX) $(PDFLATEXFLAGS) $(TARGET).tex

$(TARGET).tex: ../$(TARGET).md
	cd ..; pandoc $(PANDOCARGS) --standalone -o intermediate/$@ $(TARGET).md

%.tex: ../%.md
	cd ..; pandoc $(PANDOCARGS) -o intermediate/$@ $*.md

clean:
	git clean -dfX
